var VcExtended=VcExtended||{};VcExtended.NSRExtend=VcExtended.NSRExtend||{},VcExtended.NSRExtend.Extended=function(e){function t(){this.init()}var o;return t.prototype.init=function(){e(function(){this.eventHandler()}.bind(this));var o=null;e("body").on("click",".searchArea *",function(t){return e(t.target).is("i")||e(t.target).is(".search-autocomplete")?void t.preventDefault():(e(".searchNSR input").focus(),e(".searchNSR").addClass("fullscreen"),e(".closeSearch").removeClass("hide"),void event.stopPropagation())}).bind(this),e("body").on("click",".closeSearch",function(t){event.stopPropagation(),e(".searchNSR").removeClass("fullscreen"),e(this).addClass("hide"),e("#searchResult").html(""),e("#searchkeyword-nsr").val(""),e(".search-autocomplete").remove()}).bind(this),e.fn.enterKey=function(t){return this.each(function(){e(this).keypress(function(o){var n=o.keyCode?o.keyCode:o.which;if("13"==n)return e(".search-autocomplete").remove(),t.call(this,o),event.preventDefault(),!1})})},e(".searchNSR").enterKey(function(){e(".searchNSR").append('<div id="searchResult"></div>'),clearTimeout(o);var n=e(this).val(),a=e("#post_type").val();o=setTimeout(function(){t.prototype.siteSearch({query:n,post_type:a})},200)}).bind(this),e(".search").each(function(t,o){e("#searchResult").html(""),this.autocomplete(o),e(".searchNSR").find('input[type="search"]').is(":empty")&&e(".search-autocomplete").remove()}.bind(this)),e("body").on("click",".read-more",function(){var o=e(".searchNSR").find('input[type="search"]').val(),n=e("#post_type").val();t.prototype.siteSearch({query:o,post_type:n})})},t.prototype.siteSearch=function(t){e("#searchResult").html("");var o=(t.query,t.post_type,{action:"fetch_data",query:t.query+"&post_type"+t.post_type,limit:18});e.ajax({url:ajax_object.ajax_url,data:o,method:"GET",dataType:"json",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",ajax_object.nonce)}}).done(function(e){this.searchOutput(e)}.bind(this))},t.prototype.searchOutput=function(t){var o=e('<ul class="search-content"></ul>');"undefined"!=typeof t.content&&null!==t.content&&t.content.length>0&&e.each(t.content,function(e,t){if(t.post_excerpt)var n=t.post_excerpt.replace(/^(.{180}[^\s]*).*/,"$1")+"...";else var n="";switch(t.post_type){case"post":$postSection="Nyheter";break;case"fastighet":$postSection="Fastighetsägare & Bostadsrättsföreningar";break;case"villa":$postSection="Villa & Fritidsboende";break;case"foretag":$postSection="Företag & Restauranger";break;default:$postSection=""}o.append('<li class="col s12 m6 l6"> <i class="material-icons"> '+$icon+'</i><a href="'+t.guid+'"><h5>'+t.post_title+'</h5></a><span class="section right">'+$postSection+"</span><p>"+n+"</p></li>")}),e("#searchResult").html(o),e(".search-autocomplete").remove(),e(".search-content li").matchHeight()},t.prototype.eventHandler=function(){e("body").on("click",".showAllPosts",function(){if(event.preventDefault(),e(this).closest("ul").find("li").hasClass("hide")){e(this).closest("ul").find(".hide").addClass("show"),e(this).closest("ul").find("li").removeClass("hide");var t=e(this).closest("ul").find("li").length-6;e(this).closest("ul").find(".showPosts").text("Dölj ("+t+")")}else{e(this).closest("ul").find(".show").addClass("hide"),e(this).closest("ul").find("li").removeClass("show");var o=e(this).closest("ul").find("li").length-1;e(this).closest("ul").find(".showPosts").text("Visa alla ("+o+")")}}).bind(this)},t.prototype.autocomplete=function(t){var n=e(t),a=n.find('input[type="search"]');a.on("keydown",function(e){switch(e.which){case 40:return this.autocompleteKeyboardNavNext(t),!1;case 38:return this.autocompleteKeyboardNavPrev(t),!1;case 13:return this.autocompleteSubmit(t)}return clearTimeout(o),a.val().length<2?void n.find(".search-autocomplete").remove():void(o=setTimeout(function(){this.autocompleteQuery(t)}.bind(this),300))}.bind(this)),e(document).on("click",function(t){e(t.target).closest(".search-autocomplete").length||e(".search-autocomplete").remove()}),a.on("focus",function(e){a.val().length<2||this.autocompleteQuery(t)}.bind(this))},t.prototype.autocompleteSubmit=function(t){var o=e(t),n=o.find(".search-autocomplete"),a=n.find(".selected");if(!a.length)return!0;var i=a.find("a").attr("href");return location.href=i,!1},t.prototype.autocompleteKeyboardNavNext=function(t){var o=e(t),n=o.find(".search-autocomplete"),a=n.find(".selected"),i=null;if(i=a.length?a.next("li:not(.title):first"):n.find("li:not(.title):first"),!i.length){var s=a.parents("ul").next("ul");s.length&&(i=s.find("li:not(.title):first"))}a.removeClass("selected"),i.addClass("selected")},t.prototype.autocompleteKeyboardNavPrev=function(t){var o=e(t),n=o.find(".search-autocomplete"),a=n.find(".selected"),i=null;if(i=a.length?a.prev("li:not(.title)"):n.find("li:not(.title):last"),!i.length){var s=a.parents("ul").prev("ul");s.length&&(i=s.find("li:not(.title):last"))}a.removeClass("selected"),i.addClass("selected")},t.prototype.autocompleteQuery=function(t){var o=e(t),n=o.find('input[type="search"]').val(),a=e("#post_type").val(),i={action:"fetch_data",query:n,post_type:a,level:"ajax",type:"json"};e.ajax({url:ajax_object.ajax_url,data:i,method:"GET",dataType:"json",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",ajax_object.nonce)}}).done(function(n){o.find(".search-autocomplete").remove(),this.outputAutocomplete(t,n),e(".search-content").remove()}.bind(this))},t.prototype.outputAutocomplete=function(t,o){var n=e(t),a=e('<div class="search-autocomplete"></div>'),i=e('<ul class="search-autocomplete-content"></ul>');"undefined"!=typeof o.content&&null!==o.content&&o.content.length>0?e.each(o.content,function(e,t){var o="";switch(t.post_type){case"post":o="chat";break;case"fastighet":o="location_city";break;case"villa":o="home";break;case"foretag":o="domain";break;case"page":o="insert_drive_file"}t.is_file?i.append('<li class="col s12 m4 l4"><i class="material-icons"> '+o+'</i>"><a class="link-item-before" href="'+t.guid+'" target="_blank">'+t.post_title+"</a></li>"):i.append('<li class="col s12 m4 l4"> <i class="material-icons"> '+o+'</i><a href="'+t.guid+'">'+t.post_title+"</a></li>")}):i=e(""),null!==o.content&&0!==o.content.length&&(i.appendTo(a),a.append('<div class="extNfo"><button class="read-more block-level">'+ajax_object.searchAutocomplete.viewAll+"</a></div>"),a.appendTo(n).show(),e(".search-autocomplete-content li").matchHeight())},new t}(jQuery);var VcExtended=VcExtended||{};VcExtended.MenuCollapsibleAdmin=VcExtended.MenuCollapsibleAdmin||{},VcExtended.MenuCollapsibleAdmin.CollapsibleAdmin=function(e){function t(){this.init()}return t.prototype.init=function(){e(function(){this.eventHandler()}.bind(this)),this.colorPickerDefaultColors()},t.prototype.eventHandler=function(){var o=null;e("body").on("keyup",".vcext_search_pagetitle",function(){clearTimeout(o);var n=e(this).val();o=setTimeout(function(){t.prototype.fetchDataByKeyword({query:n})},500)}).bind(this),e("body").on("change",".vc_all_locations",function(t){e(".vc_location").val("Välj Stad/Ort...").change(),e(".vc_date_size").val("Välj format...").change(),e(".vc_type").val("Välj visningstyp...").change()}).bind(this)},t.prototype.fetchDataByKeyword=function(e){var t={action:"fetch_data",query:e.query};jQuery.post(ajax_object.ajax_url,t,function(e){console.log(jQuery.parseJSON(e))})},t.prototype.colorPickerDefaultColors=function(){jQuery(document).ready(function(e){"object"==typeof e.wp&&"function"==typeof e.wp.wpColorPicker&&(e.wp.wpColorPicker.prototype.options={palettes:["#75a3eb","#6d7dcc","#a27ac3","#fe0e35","#00aaff","#00f2d3"],hide:!0})})},new t}(jQuery);var callbackOutsideScope=function(){},VcExtended=VcExtended||{};VcExtended.MenuCollapsible=VcExtended.MenuCollapsible||{},VcExtended.MenuCollapsible.Collapsible=function(e){function t(){this.init()}return t.prototype.init=function(){e(function(){this.eventHandler()}.bind(this))},t.prototype.eventHandler=function(){e("body").on("click",".collapsible-header",function(){$id=e(this).parents("ul").attr("id"),0===e(this).find("a").length?(e($id).find(".materialIconState").text("add"),e(this).hasClass("active")?e(this).find(".materialIconState").text("clear"):e(this).find(".materialIconState").text("add")):window.location.href=e(this).find("a").attr("href")}).bind(this)},new t}(jQuery);