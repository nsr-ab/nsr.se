var VcExtended=VcExtended||{};VcExtended.NSRExtend=VcExtended.NSRExtend||{},VcExtended.NSRExtend.Extended=function(e){function t(){this.init(),e(".card-content").matchHeight()}var o=null,n=300;return t.prototype.init=function(){e("body").on("click",".showAllPosts",function(){t.prototype.displayMore(this)}).bind(this),e("body").on("click",".searchArea *",function(e){t.prototype.fullScreen(e)}).bind(this),e("body").on("click",".closeSearch",function(e){t.prototype.closeScreen(this)}).bind(this),e.fn.enterKey=function(e){t.prototype.enterTrigger(e,this)},e(".searchNSR").enterKey(function(){event.preventDefault(),window.clearTimeout(o),t.prototype.doneTyping()}),e(".searchNSR").on("input",function(){window.clearTimeout(o),o=window.setTimeout(t.prototype.doneTyping,n)}),e(".searchNSR").on("keydown",function(e){t.prototype.haltTimer(e,o)})},t.prototype.displayMore=function(t){if(event.preventDefault(),e(t).closest("ul").find("li").hasClass("hide")){e(t).closest("ul").find(".hide").addClass("show"),e(t).closest("ul").find("li").removeClass("hide");var o=e(t).closest("ul").find("li").length-6;e(t).closest("ul").find(".showPosts").text("Dölj ("+o+")")}else{e(t).closest("ul").find(".show").addClass("hide"),e(t).closest("ul").find("li").removeClass("show");var n=e(t).closest("ul").find("li").length-1;e(t).closest("ul").find(".showPosts").text("Visa alla ("+n+")")}e(".card-content").matchHeight()},t.prototype.enterTrigger=function(t,o){return o.each(function(){e(o).keypress(function(n){var i=n.keyCode?n.keyCode:n.which;if("13"==i)return e(".search-autocomplete").remove(),e(".sorteringsguiden").remove(),t.call(o,n),event.preventDefault(),!1})})},t.prototype.closeScreen=function(t){event.stopPropagation(),e(".searchNSR").removeClass("fullscreen"),e(t).addClass("hide"),e("#searchResult").html(""),e("#searchkeyword-nsr").val(""),e(".search-autocomplete").remove(),e(".sorteringsguiden").remove()},t.prototype.haltTimer=function(e,t){switch(e.which){case 32:window.clearTimeout(t);break;case 8:window.clearTimeout(t)}},t.prototype.fullScreen=function(t){return e(t.target).is("i")||e(t.target).is(".search-autocomplete")?void t.preventDefault():(e(".searchNSR input").focus(),e(".searchNSR").addClass("fullscreen"),e(".closeSearch").removeClass("hide"),void event.stopPropagation())},t.prototype.doneTyping=function(){e(".searchNSR").each(function(o,n){e(".searchNSR").find('input[type="search"]').is(":empty")&&(e(".search-autocomplete").remove(),e(".sorteringsguiden").remove()),t.prototype.autocomplete(n)})},t.prototype.autocomplete=function(t){var o=e(t),n=o.find('input[type="search"]');return n.val().length<2?(o.find(".sorteringsguiden").remove(),void o.find(".search-autocomplete").remove()):void this.autocompleteQuery(t)},t.prototype.autocompleteSubmit=function(t){var o=e(t),n=o.find(".search-autocomplete"),i=n.find(".selected");return!i.length||(location.href=i.find("a").attr("href"),!1)},t.prototype.autocompleteQuery=function(t){for(var o=e(t),n=o.find('input[type="search"]').val(),i=e("#post_type").val(),a=[i,"sorteringsguide"],r=0;r<a.length;r++){var s=a[r];"sorteringsguide"===s&&(i="sorteringsguide");var c={action:"fetch_data",query:n,post_type:i,level:"ajax",type:"json"};e.ajax({url:ajax_object.ajax_url,data:c,method:"GET",dataType:"json",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",ajax_object.nonce)}}).done(function(n){"sorteringsguide"===s?o.find(".sorteringsguiden").remove():o.find(".search-autocomplete").remove(),this.outputAutocomplete(t,n,s),e(".search-content").remove(),s=""}.bind(this))}},t.prototype.metaDataStr=function(e){var t=new Array;switch(e){case"post":t.postSection="Nyheter",t.icon="chat";break;case"fastighet":t.postSection="Fastighetsägare & Bostadsrättsföreningar",t.icon="location_city";break;case"villa":t.postSection="Villa & Fritidsboende",t.icon="home";break;case"foretag":t.postSection="Företag & Restauranger",t.icon="domain";break;case"page":t.postSection="Sidor",t.icon="insert_drive_file";break;case"faq":t.postSection="Frågor & svar",t.icon="forum";break;case"sorteringsguide":t.postSection="Sorteringsguiden",t.icon="delete"}return""===t.icon&&(t.icon="find_in_page"),t},t.prototype.outputAutocomplete=function(o,n,i){var a=e(o),r=e('<div class="search-autocomplete"><h4>Sidor på nsr.se</h4></div>'),s=e('<ul class="search-autocomplete-content"></ul>'),c=e('<div class="sorteringsguiden"><h4>Sorteringsguiden</h4></div>'),l=e('<table class="sorterings-guide-table striped"><tr><th></th><th>Sorteras som</th><th>Lämna nära dig</th><th>Bra att veta</th></tr></table>');return"undefined"!=typeof n.content&&null!==n.content&&n.content.length>0?e.each(n.content,function(e,o){if(o.post_excerpt)var n=o.post_excerpt.replace(/^(.{180}[^\s]*).*/,"$1")+"...";else var n="";var a=t.prototype.metaDataStr(o.post_type);a.icon||(a.icon="find_in_page"),"sorteringsguide"!=i&&s.append('<li class="collapsible-header col s12 m12 l12"> <i class="material-icons"> '+a.icon+'</i><a href="'+o.guid+'">'+o.post_title+'<span class="section right">'+a.postSection+'</span><div class="moreinfo">'+n+"</div></a></li>"),"sorteringsguide"===i&&l.append("<tr><td>post.post_avfall</td><td>post.post_sorteras</td><td>post.post_inlamning</td><td>post.post_braveta</td></tr>")}):s=e(""),null===n.content||0===n.content.length?void r.append('<ul><li class="search-autocomplete-nothing-found">Inga träffar…</li></ul>'):("sorteringsguide"!=i&&s.appendTo(r),"sorteringsguide"===i&&(l.appendTo(c),c.appendTo(a)),"sorteringsguide"!=i&&r.appendTo(a).show(),void e(".search-autocomplete-content li").matchHeight())},new t}(jQuery);var VcExtended=VcExtended||{};VcExtended.MenuCollapsibleAdmin=VcExtended.MenuCollapsibleAdmin||{},VcExtended.MenuCollapsibleAdmin.CollapsibleAdmin=function(e){function t(){this.init()}return t.prototype.init=function(){e(function(){this.eventHandler()}.bind(this)),this.colorPickerDefaultColors()},t.prototype.eventHandler=function(){var o=null;e("body").on("keyup",".vcext_search_pagetitle",function(){clearTimeout(o);var n=e(this).val();o=setTimeout(function(){t.prototype.fetchDataByKeyword({query:n})},500)}).bind(this),e("body").on("change",".vc_all_locations",function(t){e(".vc_location").val("Välj Stad/Ort...").change(),e(".vc_date_size").val("Välj format...").change(),e(".vc_type").val("Välj visningstyp...").change()}).bind(this)},t.prototype.fetchDataByKeyword=function(e){var t={action:"fetch_data",query:e.query};jQuery.post(ajax_object.ajax_url,t,function(e){console.log(jQuery.parseJSON(e))})},t.prototype.colorPickerDefaultColors=function(){jQuery(document).ready(function(e){"object"==typeof e.wp&&"function"==typeof e.wp.wpColorPicker&&(e.wp.wpColorPicker.prototype.options={palettes:["#75a3eb","#6d7dcc","#a27ac3","#fe0e35","#00aaff","#00f2d3"],hide:!0})})},new t}(jQuery);var callbackOutsideScope=function(){},VcExtended=VcExtended||{};VcExtended.MenuCollapsible=VcExtended.MenuCollapsible||{},VcExtended.MenuCollapsible.Collapsible=function(e){function t(){this.init()}return t.prototype.init=function(){e(function(){this.eventHandler()}.bind(this))},t.prototype.eventHandler=function(){e("body").on("click",".collapsible-header",function(){$id=e(this).parents("ul").attr("id"),0===e(this).find("a").length?(e($id).find(".materialIconState").text("add"),e(this).hasClass("active")?e(this).find(".materialIconState").text("clear"):e(this).find(".materialIconState").text("add")):window.location.href=e(this).find("a").attr("href")}).bind(this)},new t}(jQuery);