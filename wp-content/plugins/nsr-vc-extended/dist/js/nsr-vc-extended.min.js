var VcExtended=VcExtended||{};VcExtended.NSRExtend=VcExtended.NSRExtend||{},VcExtended.NSRExtend.Extended=function(e){function t(){t.prototype.init()}var a,n,o=null,r=[],s=!1;return t.prototype.init=function(){t.prototype.DefaultSiteSearch(),e("body").hasClass("wp-admin")||e(".card-content").matchHeight(),e(function(){this.CollapsibleHeaders()}.bind(this)),e("body").on("click",".showAllPosts",function(){t.prototype.displayMore(this)}).bind(this),e("body").on("click",".card",function(t){e(this).data("link")&&(window.location.href=e(this).data("link"))}).bind(this),e("body").on("click",".searchArea *",function(e){t.prototype.fullScreen(e)}).bind(this),e("body").on("click",".closeSearch",function(e){t.prototype.closeScreen(this)}).bind(this),e.fn.enterKey=function(e){t.prototype.enterTrigger(e,this)},e(".searchNSR").enterKey(function(){event.preventDefault(),window.clearTimeout(o),t.prototype.doneTyping()}),e(".searchNSR form").on("submit",function(e){return e.preventDefault(),window.clearTimeout(o),t.prototype.doneTyping(),!1}).bind(this),e(".searchNSR").on("input",function(){window.clearTimeout(o),s||(e(".searchNSR .search-button").show(),s=!0)}),e(".searchNSR").on("keydown",function(e){t.prototype.haltTimer(e,o)}),e("body").on("click",".locationmap",function(){e(this).data("url")&&window.open(e(this).data("url"),"_blank")}).bind(this),e("body").on("click","#searchkeyword-nsr",function(){e("#searchkeyword-nsr").focus()}).bind(this)},t.prototype.DefaultSiteSearch=function(){var a=t.prototype.getUrlParameter("q");a&&(e(".searchNSR .search-button").show(),e("#searchkeyword-nsr").focus(),e("#searchkeyword-nsr").val(a.replace(/\+/g," ")),t.prototype.doneTyping())},t.prototype.CollapsibleHeaders=function(){e("body").on("click",".collapsible-header",function(){$id=e(this).parents("ul").attr("id"),0===e(this).find("a").length?(e($id).find(".materialIconState").text("add"),e(this).hasClass("active")?e(this).find(".materialIconState").text("remove"):e(this).find(".materialIconState").text("add")):window.location.href=e(this).find("a").attr("href")}).bind(this)},t.prototype.encodeStr=function(e){return e.split("").reduce(function(e,t){return e=(e<<5)-e+t.charCodeAt(0),e&e},0)},t.prototype.displayMore=function(t){if(event.preventDefault(),e(t).closest("ul").find("li").hasClass("hide")){e(t).closest("ul").find(".hide").addClass("show"),e(t).closest("ul").find("li").removeClass("hide");var a=e(t).closest("ul").find("li").length-6;e(t).closest("ul").find(".showPosts").text("Dölj ("+a+")")}else{e(t).closest("ul").find(".show").addClass("hide"),e(t).closest("ul").find("li").removeClass("show");var n=e(t).closest("ul").find("li").length-1;e(t).closest("ul").find(".showPosts").text("Visa alla ("+n+")")}e(".card-content").matchHeight()},t.prototype.enterTrigger=function(t,a){return a.each(function(){e(a).keypress(function(n){var o=n.keyCode?n.keyCode:n.which;if("13"==o)return e(".search-autocomplete").remove(),e(".sorteringsguiden").remove(),t.call(a,n),event.preventDefault(),!1})})},t.prototype.haltTimer=function(e,t){switch(e.which){case 32:window.clearTimeout(t);break;case 8:window.clearTimeout(t)}},t.prototype.closeScreen=function(t){event.stopPropagation(),e(".errorPages").addClass("hide"),e(".errorSortguide").addClass("hide"),e(".searchNSR").removeClass("fullscreen"),e(".searchNSR").removeClass("searchResult"),e(t).addClass("hide"),e("#searchkeyword-nsr").val(""),e(".search-autocomplete").remove(),e(".sorteringsguiden").remove(),e(".vc_row").show(),e(".page-footer").show(),e(".main-container").removeAttr("style"),e(".search-fetchPlanner").html(""),e("body").hasClass("error404")&&e(".sidebar-footer-area").css("margin-top","0px"),e(".tooltip-info.static-tooltip").removeClass("tooltipAfter"),e(window).width()<540&&e(".mob .center").addClass("hide")},t.prototype.fullScreen=function(t){return e(t.target).is("i")||e(t.target).is(".search-autocomplete")?void t.preventDefault():(e(".searchNSR input").focus(),e(".searchNSR").addClass("fullscreen"),t.stopPropagation(),e(".searchNSR").hasClass("position-relative")||(e(".tooltip-info.static-tooltip").addClass("tooltipAfter"),e(".closeSearch").removeClass("hide"),e("html, body").animate({scrollTop:0},"slow"),e(".vc_row").hide(),e(".page-footer").hide(),e(".searchNSR").closest(".vc_row").show(),e(".main-container").height(317),e(window).width()<540?(e(".main-container").height(237),e(".mob .center").removeClass("hide")):e(".mob .center").addClass("hide")),void(e("body").hasClass("error404")&&e(".sidebar-footer-area").css("margin-top","200px")))},t.prototype.fpTimer=function(){t.prototype.fetchPlannerQuery(e(".searchNSR"))},t.prototype.ElasticTimer=function(e){t.prototype.autocomplete(e)},t.prototype.doneTyping=function(){e(".searchNSR").each(function(e,o){clearTimeout(n),clearTimeout(a),n=setTimeout(function(){t.prototype.ElasticTimer(o)},300)}),a=setTimeout(t.prototype.fpTimer,1100)},t.prototype.autocomplete=function(t){var a=e(t),n=a.find('input[type="search"]');n.val().length<2||this.autocompleteQuery(t)},t.prototype.autocompleteSubmit=function(t){var a=e(t),n=a.find(".search-autocomplete"),o=n.find(".selected");return!o.length||(location.href=o.find("a").attr("href"),!1)},t.prototype.pushQueryUrl=function(e,t,a){if("undefined"!=typeof history){var n=(history.state,{query:t,post_type:a}),o="S&ouml;k - NSR AB",r="/sok/?q="+encodeURIComponent(t);""!=a&&"all"!=a&&(r+="&post_type="+encodeURIComponent(a)),history.replaceState(n,o,r)}},t.prototype.autocompleteQuery=function(a){var n=e(a),o=n.find('input[type="search"]').val(),r=e("#post_type",n.find('input[type="search"]').parent()).val();t.prototype.pushQueryUrl(n,o,r);var s={action:"fetchDataFromElasticSearch",query:o,post_type:r,level:"ajax",type:"json"};t.prototype.getJsonData(n,s,r)},t.prototype.fetchPlannerQuery=function(a){var n=e(a),o=e("#searchkeyword-nsr").val(),r=e("#post_type",e("#searchkeyword-nsr").parent()).val(),s={action:"fetchDataFromFetchPlannerCombined",query:o,post_type:r,level:"ajax",type:"json"};t.prototype.getJsonData(n,s,null)},t.prototype.spinner=function(){var e=arguments[0],t=arguments[1],a=arguments[2]?"block":"none";return t||(t="small"),'<div class="'+e+" preloader-wrapper "+t+' active" style="display:'+a+';"> <div class="spinner-layer spinner-white-only"> <div class="circle-clipper left"> <div class="circle"></div> </div><div class="gap-patch"> <div class="circle"></div> </div><div class="circle-clipper right"> <div class="circle"></div> </div> </div> </div> '},t.prototype.getJsonData=function(a,n,o){var r=t.prototype.spinner(t.prototype.hashCode(n.action),"big",!0);e.ajax({url:ajax_object.ajax_url,data:n,method:"GET",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-WP-Nonce",ajax_object.nonce),e(".searchNSR form .preloader-wrapper").length<1&&e(".searchNSR .searchArea").append(r),e("#searchkeyword-nsr").removeClass("valid"),e("#searchkeyword-nsr").removeClass("invalid"),e("#searchkeyword-nsr").addClass("waitingForConnection")}}).complete(function(){"fetchDataFromFetchPlanner"!==n.action&&"fetchDataFromFetchPlannerCombined"!==n.action||e(".searchArea .preloader-wrapper").remove()}).done(function(t){"fetchDataFromElasticSearch"===n.action?(e(".searchNSR").addClass("searchResult"),a.find(".sorteringsguiden").remove(),a.find(".search-autocomplete").remove(),"undefined"!=typeof t.sortguide&&null!==t.sortguide&&"undefined"!=typeof parent.ga&&parent.ga("send","event","SiteSearch",n.action,n.query,t.sortguide.length),"undefined"!=typeof t.content&&null!==t.content&&"undefined"!=typeof parent.ga&&parent.ga("send","event","SiteSearch",n.action,n.query,t.content.length),this.outputAutocomplete(a,t,o)):(e(".search-fetchPlanner").html(""),"undefined"!=typeof t.fp&&null!==t.fp&&"undefined"!=typeof parent.ga&&parent.ga("send","event","SiteSearch",n.action,n.query,t.fp.length),this.outputFetchPlanner(t,!1),e("#searchkeyword-nsr").hasClass("valid")&&e("#searchkeyword-nsr").addClass("valid"))}.bind(this))},t.prototype.metaDataStr=function(e){var t=new Array;switch(e){case"post":t.postSection="Nyheter",t.icon="chat";break;case"fastighet":t.postSection="Fastighetsägare & Bostadsrättsföreningar",t.icon="location_city";break;case"villa":t.postSection="Villa & Privat",t.icon="home";break;case"foretag":t.postSection="Företag & Verksamheter",t.icon="domain";break;case"page":t.postSection="Sidor",t.icon="insert_drive_file";break;case"faq":t.postSection="Frågor & svar",t.icon="forum";break;case"sorteringsguide":t.postSection="Sorteringsguiden",t.icon="delete"}return""===t.icon&&(t.icon="find_in_page"),t},t.prototype.Strpos=function(e,t,a){var n=(e+"").indexOf(t,a||0);return n===-1?0:n},t.prototype.hashCode=function(e){var t=0;if(null===e)return t;for(i=0;i<e.length;i++)char=e.charCodeAt(i),t=(t<<5)-t+char,t&=t;return t},t.prototype.outputFetchPlanner=function(t){var a="",n="",o=!1;if("undefined"!=typeof t.fp&&null!==t.fp&&t.fp.length>0){a+='<h4>Tömningsdagar</h4><table class="fp-table"><tr class="tabDesk"><th colspan="2">Adress</th><th>Nästa tömning</th></tr>',n+='<table class="fp-table-mobile">';var r=(new Date).toISOString().slice(0,10),s=!1;e.each(t.fp,function(i,l){var c=[],p="",d="";if(e("#searchkeyword-nsr").removeClass("invalid"),e("#searchkeyword-nsr").addClass("valid"),l.hasOwnProperty("Exec")){for(var h=!1,f=0;f<l.Exec.AvfallsTyp.length;f++)0!=l.Exec.AvfallsTyp&&l.Exec.Datum[f]>=r&&!c.indexOf(l.Exec.AvfallsTyp[f]+" "+l.Exec.Datum[f])>-1&&(o=!0,h=!0,c.avfall=l.Exec.AvfallsTyp[f],p+='<span class="badge">'+l.Exec.AvfallsTyp[f]+"</span><br /> ",c.nDate=l.Exec.AvfallsTyp[f],d+=l.Exec.DatumFormaterat[f]+"<br />",c[f]=l.Exec.AvfallsTyp[f]+" "+l.Exec.Datum[f]);h&&(a+='<tr id="'+l.id+'" class="tabDesk">',a+='<td class="streetCiy"><strong>'+l.Adress+"</strong>",a+='<div><b class="">'+l.Ort+"</b></div>",a+=' <a target="_blank" href="/wp-admin/admin-ajax.php?action=fetchDataFromFetchPlannerCalendar&query='+encodeURIComponent(t.q)+"&level=ajax&type=json&calendar_type=ical&id="+encodeURIComponent(l.id)+'"><h4>ical</h4></a>',a+=' <a target="_blank" href="/wp-admin/admin-ajax.php?action=fetchDataFromFetchPlannerCalendar&query='+encodeURIComponent(t.q)+"&level=ajax&type=json&calendar_type=pdf&id="+encodeURIComponent(l.id)+'"><h4>pdf</h4></a>',a+='</td><td style="padding-top:15px;">',a+=p+"</td><td>"+d,n+='<tr class="fpthmob"><th colspan="2"><i class="material-icons">date_range</i> <span><strong> '+l.Adress+"</span>, <span>"+l.Ort+"</span></strong></th></tr>",n+="<tr><th>Kärl</th><th>Nästa tömning</th></tr>",n+='<tr><td style="padding-top:15px;">'+p+"</td><td>"+d+"</td></tr>",a+="</td></tr>")}s=!1}),a+="</table>",n+="</table>"}"undefined"!=typeof t.fp&&null!==t.fp?0!==t.fp.length&&o?e(".search-fetchPlanner").detach().insertBefore(".errorSortguide"):(a='<h4>Tömningsdagar</h4><br /><p class="noResult">Det blev ingen träff på "'+e("#searchkeyword-nsr").val()+'". Tömningsdagar finns även på <a style="color:#ffffff!important;" href="https://minasidor.nsr.se">minasidor.nsr.se</a></p>',e(".search-fetchPlanner").detach().insertAfter(".errorSortguide")):e(".search-fetchPlanner").detach().insertAfter(".errorSortguide"),e(".search-fetchPlanner").append(a),e(".search-fetchPlanner").append(n)},t.prototype.outputAutocomplete=function(a,n,o){var s=(e(a),e('<div class="search-autocomplete"></div>')),i=e('<ul class="search-autocomplete-content"></ul>'),l=e('<div class="sorteringsguiden"><h4>Sorteringsguiden</h4><div class="left badgeInfo"><span class="badge">P</span> Privat <span class="badge">F</span> Företag<br /></div></div>'),c=t.prototype.spinner(t.prototype.hashCode("elasticCords")),p=e('<table class="sorterings-guide-table"><tr class="tabDesk"><th></th><th>Sorteras som</th><th class="exnfodispl">Bra att veta</th><th class="relative">Lämnas nära dig</th></tr></table>'),d=!1,h=!1;if("undefined"!=typeof n.sortguide&&null!==n.sortguide&&n.sortguide.length>0){var f,u,m="",g="",v=0;e(".errorSortguide").is(":visible")&&e(".errorSortguide").addClass("hide"),e.each(n.sortguide,function(e,a){var n="";if(a.post_meta&&a.post_meta.avfall_kundkategori&&a.post_meta.avfall_kundkategori.length>=1&&(a.post_meta.avfall_kundkategori[0].indexOf("foretag")>=0&&(n+='<span class="badge sortSectionIcon company">F</span>'),a.post_meta.avfall_kundkategori[0].indexOf("villa")>=0&&(n+='<span class="badge sortSectionIcon private">P</span> ')),f+='<tr class="tabMobile"><th class="col s12">Avfall:</th><td valign="top col s12">'+a.post_title+' <div class="badgecontainer">'+n+"</div></td></tr>",f+='<tr class="tabDesk"><td class="preSortCell" valign="top">'+a.post_title+' <div class="badgecontainer">'+n+'</div></td><td valign="top">',a.post_meta){if(""!=a.post_meta.fraktion_avc.name&&null!=a.post_meta.fraktion_avc.name){if(f+='<li><b>Återvinningscentral:</b><ul class="sortAs meta-fraktion">',m+="<li><b>Återvinningscentral:<br /></b><ul>",""!=a.post_meta.fraktion_avc.link)var o='<a href="'+a.post_meta.fraktion_avc.link+'">'+a.post_meta.fraktion_avc.name+"</a>";else var o=a.post_meta.fraktion_avc.name;f+='<li class="fraktion-icon">'+o+"</li>",m+='<li class="fraktion-icon">'+o+"<li>",f+="</ul></li>",m+="</ul></li>"}if(""!=a.post_meta.fraktion_hemma.name&&null!=a.post_meta.fraktion_hemma.name){if(f+='<li><b>Hemma:</b><ul class="meta-fraktion">',m+='<li><b class="sortAs">Hemma:</b><ul>',""!=a.post_meta.fraktion_hemma.link)var s='<a href="'+a.post_meta.fraktion_hemma.link+'">'+a.post_meta.fraktion_hemma.name+"</a>";else var s=a.post_meta.fraktion_hemma.name;f+='<li class="fraktion-icon">'+s+"</li>",m+='<li class="fraktion-icon">'+s+"<li>",f+="</ul></li>",m+="</ul></li>"}}f+="</td>";var i="";a.post_meta&&a.post_meta.avfall_bra_att_veta&&a.post_meta.avfall_bra_att_veta.length>=1&&"undefined"!=typeof a.post_meta.avfall_bra_att_veta[0]&&(i=a.post_meta.avfall_bra_att_veta[0].replace(new RegExp("\r?\n","g"),"<br />")),f+='<td class="exnfodispl">'+i+"</td>",f+='<td valign="top">'+c+'<ul class="inlstallen">';var l="";if(a.post_meta&&a.post_meta.inlamningsstallen&&a.post_meta.inlamningsstallen.length){u=[];for(var p=0;p<a.post_meta.inlamningsstallen.length;p++){var h,y,_="",b="",k="",w="",S="",C="",x="";for(h=0;h<a.post_meta.inlamningsstallen[p].length;h++)h>5&&(l="hide"),a.post_meta.inlamningsstallen[p][h].pageurl&&(b="",k="",y="",t.prototype.Strpos(a.post_meta.inlamningsstallen[p][h].pageurl,"?page_id=")&&(a.post_meta.inlamningsstallen[p][h].pageurl="",b="",k="",_="",y=""),""!=a.post_meta.inlamningsstallen[p][h].pageurl&&(b='<a href="'+a.post_meta.inlamningsstallen[p][h].pageurl+'">',k="</a>",y="locationmap"),a.post_meta.inlamningsstallen[p][h].lat&&a.post_meta.inlamningsstallen[p][h]["long"]&&(a.post_meta.inlamningsstallen[p][h].pageurl||(_=' data-url="http://maps.google.com?q='+a.post_meta.inlamningsstallen[p][h].lat+","+a.post_meta.inlamningsstallen[p][h]["long"]+'" ',y="locationmap"))),a.post_meta.inlamningsstallen[p][h].lat&&a.post_meta.inlamningsstallen[p][h]["long"]&&(w='data-lat="'+a.post_meta.inlamningsstallen[p][h].lat+'" data-long="'+a.post_meta.inlamningsstallen[p][h]["long"]+'"',S=t.prototype.hashCode("id_"+p+h+"_"+a.post_meta.inlamningsstallen[p][h].lat+a.post_meta.inlamningsstallen[p][h]["long"])),a.post_meta.inlamningsstallen[p][h].lat&&a.post_meta.inlamningsstallen[p][h]["long"]&&(u[h]=[a.post_meta.inlamningsstallen[p][h].city,a.post_meta.inlamningsstallen[p][h].lat,a.post_meta.inlamningsstallen[p][h]["long"],a.post_meta.inlamningsstallen[p][h].city,S]),C=S,S&&(S='id="'+S+'"'),S="",null!=a.post_meta.inlamningsstallen[p][h].city&&(b||(x="nullLink"),f+='<li searchid="'+C+'" '+S+" "+w+' class="'+x+" "+y+" "+l+'" '+_+"> "+b+a.post_meta.inlamningsstallen[p][h].city+k+"</li>",g+='<li searchid="'+C+'" '+S+" "+w+' class="'+x+" "+y+" "+l+'" '+_+"> "+b+a.post_meta.inlamningsstallen[p][h].city+k+"</li>"),nullLink="",y="",l="",_="",w="",S=""}r[v]=u,v++,f+='<li class="viewAllInlamning"><a href="/alla-inlamningsstallen/">Visa alla</a></li>'}f+="</ul></td>",f+="</tr>",f+='<tr class="tabMobile"><th class="col s12">Sorteras som:</th><td><ul class="meta-fraktion">'+m+"</ul></td></tr>",f+='<tr class="tabMobile lastchild"><th class="col s12">Lämnas:</th><td>'+c+'<ul class="inlstallen">'+g+'<li class="viewAllInlamning"><a href="/alla-inlamningsstallen/">Visa alla</a></li></ul></td></tr>',m="",g="",a.post_title.length>0&&(d=!0)}),p.append(f)}if("undefined"!=typeof n.sortguide&&null!==n.sortguide&&0===n.sortguide.length){var y="";y+='<h4>Sorteringsguide</h4><br /><p class="noResult">Det blev ingen träff på "'+e("#searchkeyword-nsr").val()+'". Tipsa oss om avfall som vi kan lägga till här  (<a style="color:#ffffff!important;" href="https://nsr.se/sorteringsguiden">nsr.se/sorteringsguiden</a>)</p>',e(".errorSortguide").html(y).removeClass("hide")}t.prototype.metaDataStr("sorteringsguide");if("undefined"!=typeof n.content&&null!==n.content&&n.content.length>0&&(e(".errorPages").is(":visible")&&e(".errorPages").addClass("hide"),e.each(n.content,function(e,a){var n=a.post_excerpt.replace(/^(.{180}[^\s]*).*/,"$1");n&&(n+="...");var o=t.prototype.metaDataStr(a.post_type);o.icon||(o.icon="find_in_page");var r='<li class="collapsible-header col s12 m12 l12"> <i class="material-icons"> '+o.icon+'</i><a href="'+a.guid+'">'+a.post_title+'<span class="section right">'+o.postSection+"</span>";n&&(r+='<div class="moreinfo">'+n+"</div>"),r+="</a></li>",i.append(r),h=!0}),e(".search-autocomplete").prepend("<h4>Sidor på nsr.se</h4>")),"undefined"!=typeof n.content&&null!==n.content&&0===n.content.length){var y="";y+='<h4>Sidor på nsr.se</h4><br /><p class="noResult">Ingen träff på "'+e("#searchkeyword-nsr").val()+'".</p>',e(".errorPages").html(y).removeClass("hide")}d&&(p.appendTo(l),l.detach().insertBefore(".errorSortguide")),h&&(i.appendTo(s),s.detach().insertBefore(".errorSortguide")),e(".fraktion-icon").each(function(){e(this).find("span").hasClass("nofraktionlink")&&e(this).removeClass("fraktion-icon")}),h&&e(".search-autocomplete").prepend("<h4>Sidor på nsr.se</h4>"),h||d||(e("#searchkeyword-nsr").addClass("invalid"),e("#searchkeyword-nsr").removeClass("valid")),window.navigator.geolocation&&(e(".search-autocomplete .preloader-wrapper").fadeIn("slow"),window.navigator.geolocation.getCurrentPosition(t.prototype.UserLocation,t.prototype.GeoError))},t.prototype.GeoError=function(t){switch(t.code){case t.PERMISSION_DENIED:constant="PERMISSION_DENIED",e(".search-autocomplete .preloader-wrapper").hide(),console.log("geoLocation: "+constant);break;case t.POSITION_UNAVAILABLE:constant="POSITION_UNAVAILABLE",e(".search-autocomplete .preloader-wrapper").hide(),console.log("geoLocation: "+constant);break;case t.TIMEOUT:constant="TIMEOUT",e(".search-autocomplete .preloader-wrapper").hide(),console.log("geoLocation: "+constant);break;default:constant="Unrecognized error",e(".search-autocomplete .preloader-wrapper").hide()}},t.prototype.UserLocation=function(e){t.prototype.NearestCity(e.coords.latitude,e.coords.longitude)},t.prototype.Deg2Rad=function(e){return e*Math.PI/180},t.prototype.PythagorasEquirectangular=function(e,a,n,o){e=t.prototype.Deg2Rad(e),n=t.prototype.Deg2Rad(n),a=t.prototype.Deg2Rad(a),o=t.prototype.Deg2Rad(o);var r=6371,s=(o-a)*Math.cos((e+n)/2),i=n-e,l=Math.sqrt(s*s+i*i)*r;return l},t.prototype.getDistanceFromLatLonInKm=function(e,a,n,o){var r=6371,s=t.prototype.Deg2Rad(n-e),i=t.prototype.Deg2Rad(o-a),l=Math.sin(s/2)*Math.sin(s/2)+Math.cos(t.prototype.Deg2Rad(e))*Math.cos(t.prototype.Deg2Rad(n))*Math.sin(i/2)*Math.sin(i/2),c=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),p=r*c;return p},t.prototype.findClosest=function(){return arguments[0]instanceof Array&&(arguments=arguments[0]),Math.min.apply(Math,arguments)},t.prototype.NearestCity=function(a,n){var o=null;for(ind=0;ind<r.length;++ind)if(ind<r.length+1){var s,i=[];for(index=0;index<r[ind].length;++index)if(r[ind][index]){var l=t.prototype.getDistanceFromLatLonInKm(a,n,r[ind][index][1],r[ind][index][2]);i[index]=l,r[ind][index][3]=l}for(index=0;index<r[ind].length;++index)if(r[ind][index]){var c=t.prototype.findClosest(i);if(c===r[ind][index][3]){var o=r[ind][index][4],p=e('[searchid="'+o+'"]');e(p).each(function(){e(this).addClass("closeToHome")})}c=null}icn=!1}return e(".inlstallen").each(function(){var t=!1;e(this).find("li").each(function(){if(t)return void(e(this).hasClass("closeToHome")&&e(this).removeClass("closeToHome"));if(e(this).hasClass("closeToHome")){e(this).addClass("geoLink"),e(this).removeClass("hide");var a=e(this).clone();e(this).parent().prepend(a),e(this).remove(),t=!0}})}),e(".search-autocomplete .preloader-wrapper").fadeOut("slow"),r[s]},t.prototype.getUrlParameter=function(e){var t,a,n=decodeURIComponent(window.location.search.substring(1)),o=n.split("&");for(a=0;a<o.length;a++)if(t=o[a].split("="),t[0]===e)return void 0===t[1]||t[1]},new t}(jQuery);