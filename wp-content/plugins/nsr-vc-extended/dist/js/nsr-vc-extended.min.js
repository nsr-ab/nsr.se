var VcExtended=VcExtended||{};VcExtended.NSRExtend=VcExtended.NSRExtend||{},VcExtended.NSRExtend.Extended=function(e){function a(){a.prototype.init()}var t,n,s=null,r=[],o=!1,l=[];return a.prototype.init=function(){a.prototype.DefaultSiteSearch(),e("body").hasClass("wp-admin")||e(".card-content").matchHeight(),e(function(){this.CollapsibleHeaders()}.bind(this)),e("body").on("click",".showAllPosts",function(){a.prototype.displayMore(this)}).bind(this),e("body").on("click",".card",function(a){e(this).data("link")&&(window.location.href=e(this).data("link"))}).bind(this),e.fn.enterKey=function(e){a.prototype.enterTrigger(e,this)},e(".searchNSR").enterKey(function(){e(".sorteringsguiden-data").html(""),e(".search-autocomplete-data").html(""),e(".search-fetchPlanner-data").html(""),event.preventDefault(),window.clearTimeout(s),a.prototype.doneTyping(),e(".searchWrapper").addClass("searching"),e(".search-nav li").removeClass("active")}),e(".searchNSR form").on("submit",function(t){return e(".sorteringsguiden-data").html(""),e(".search-autocomplete-data").html(""),e(".search-fetchPlanner-data").html(""),t.preventDefault(),window.clearTimeout(s),a.prototype.doneTyping(),e(".searchWrapper").addClass("searching"),e(".search-nav li").removeClass("active"),!1}).bind(this),e("body").on("click",".a-o",function(t){return e(".sorteringsguiden-data").html(""),e(".search-autocomplete-data").html(""),e(".search-fetchPlanner-data").html(""),t.preventDefault(),window.clearTimeout(s),a.prototype.doneTyping(),e(".searchWrapper").addClass("searching"),e(".search-nav li").removeClass("active"),!1}).bind(this),e(".searchNSR").on("input",function(){window.clearTimeout(s),o||(e(".searchNSR .search-button").show(),o=!0)}),e(".searchNSR").on("keydown",function(e){a.prototype.haltTimer(e,s)}),e("body").on("click",".locationmap",function(){e(this).data("url")&&window.open(e(this).data("url"),"_blank")}).bind(this),e("body").on("click","#searchkeyword-nsr",function(){e("#searchkeyword-nsr").focus()}).bind(this),e("body").on("click",".nsr-elasticSearch-nav",function(){e("#nsr-searchResult").removeClass("transparent-background"),e(".search-nav li").removeClass("active"),e(this).addClass("active"),e(".searchView").addClass("hide"),e(".sorteringsguiden").removeClass("hide"),e(".a-o").removeClass("hide")}).bind(this),e("body").on("click",".nsr-page-nav",function(){e("#nsr-searchResult").addClass("transparent-background"),e(".search-nav li").removeClass("active"),e(this).addClass("active"),e(".searchView").addClass("hide"),e(".search-autocomplete").removeClass("hide"),e(".a-o").addClass("hide")}).bind(this),e("body").on("click",".nsr-fetchplanner-nav",function(){e("#nsr-searchResult").removeClass("transparent-background"),e(".search-nav li").removeClass("active"),e(this).addClass("active"),e(".searchView").addClass("hide"),e(".search-fetchPlanner").removeClass("hide"),e(".a-o").addClass("hide")}).bind(this),e("body").on("click",".preSort-inl .material-icons",function(){e(".inlstallen li").hide(),e(".sorteringsguiden-data tr").removeClass("expand-tr"),e(this).hasClass("expand-more")?(e(".preSort-inl").find("i").text("expand_more"),e(this).removeClass("expand-more"),e(this).addClass("expand-less"),e(this).text("expand_less"),e(this).closest(".preSort-inl").find("li").show(),e(this).closest("tr").addClass("expand-tr"),e(".inlstallen").each(function(){e(this).find("li:first").show()})):(e(this).removeClass("expand-less"),e(this).addClass("expand-more"),e(this).text("expand_more"),e(this).closest(".preSort-inl").find("li").hide(),e(".inlstallen").each(function(){e(this).find("li:first").show()}))}).bind(this),e("body").on("click",".preSortCell .material-icons",function(){e(this).closest(".tabDesk").find(".preSort-frakt").hasClass("showPreSorts")?(e(this).closest(".tabDesk").find(".expand-more").removeClass("hide"),e(this).addClass("hide"),e(this).closest(".tabDesk").find(".preSort-frakt").removeClass("showPreSorts"),e(this).closest(".tabDesk").find(".preSort-inl").removeClass("showPreSorts"),e(this).closest("tr").removeClass("expand-tr")):(e(this).closest(".tabDesk").find(".expand-less").removeClass("hide"),e(this).addClass("hide"),e(this).closest(".tabDesk").find(".preSort-frakt").addClass("showPreSorts"),e(this).closest(".tabDesk").find(".preSort-inl").addClass("showPreSorts"),e(this).closest("tr").addClass("expand-tr"))}).bind(this),e("body").on("click",".fp .tabDesk .material-icons",function(){e(this).closest(".tabDesk").find(".avfall").hasClass("hideDetails")?(e(this).closest(".tabDesk").find(".avfall").removeClass("hideDetails"),e(this).closest(".tabDesk").addClass("expand-tr"),e(this).closest(".tabDesk").find(".material-icons").text("expand_less")):(e(this).closest(".tabDesk").find(".avfall").addClass("hideDetails"),e(this).closest(".tabDesk").find(".material-icons").text("expand_more"),e(this).closest(".tabDesk").removeClass("expand-tr"))}).bind(this),e(".searchDesignation").html(e(".searchNSR").attr("data-searchdesignation"))},a.prototype.onReSize=function(){},a.prototype.DefaultSiteSearch=function(){var t=a.prototype.getUrlParameter("q");t&&(e(".searchNSR .search-button").show(),e("#searchkeyword-nsr").focus(),e("#searchkeyword-nsr").val(t.replace(/\+/g," ")),a.prototype.doneTyping())},a.prototype.CollapsibleHeaders=function(){e("body").on("click",".collapsible-header",function(){$id=e(this).parents("ul").attr("id"),0===e(this).find("a").length?(e($id).find(".materialIconState").text("add"),e(this).hasClass("active")?e(this).find(".materialIconState").text("remove"):e(this).find(".materialIconState").text("add")):window.location.href=e(this).find("a").attr("href")}).bind(this)},a.prototype.encodeStr=function(e){return e.split("").reduce(function(e,a){return e=(e<<5)-e+a.charCodeAt(0),e&e},0)},a.prototype.displayMore=function(a){if(event.preventDefault(),e(a).closest("ul").find("li").hasClass("hide")){e(a).closest("ul").find(".hide").addClass("show"),e(a).closest("ul").find("li").removeClass("hide");var t=e(a).closest("ul").find("li").length-6;e(a).closest("ul").find(".showPosts").text("Dölj ("+t+")")}else{e(a).closest("ul").find(".show").addClass("hide"),e(a).closest("ul").find("li").removeClass("show");var n=e(a).closest("ul").find("li").length-1;e(a).closest("ul").find(".showPosts").text("Visa alla ("+n+")")}e(".card-content").matchHeight()},a.prototype.enterTrigger=function(a,t){return t.each(function(){e(t).keypress(function(e){var n=e.keyCode?e.keyCode:e.which;if("13"==n)return a.call(t,e),event.preventDefault(),!1})})},a.prototype.haltTimer=function(a,t){switch(a.which){case 32:window.clearTimeout(t);break;case 8:window.clearTimeout(t)}e("body").hasClass("error404")&&e(".sidebar-footer-area").css("margin-top","200px")},a.prototype.fpTimer=function(){a.prototype.fetchPlannerQuery(e(".searchNSR"))},a.prototype.ElasticTimer=function(e){a.prototype.autocomplete(e)},a.prototype.doneTyping=function(){e(".searchNSR").each(function(e,s){clearTimeout(n),clearTimeout(t),n=setTimeout(function(){a.prototype.ElasticTimer(s)},300)}),t=setTimeout(a.prototype.fpTimer,1100)},a.prototype.Strpos=function(e,a,t){var n=(e+"").indexOf(a,t||0);return n===-1?0:n},a.prototype.hashCode=function(e){var a=0;if(null===e)return a;for(i=0;i<e.length;i++)char=e.charCodeAt(i),a=(a<<5)-a+char,a&=a;return a},a.prototype.metaDataStr=function(e){var a=new Array;switch(e){case"post":a.postSection="Nyheter",a.icon="chat";break;case"fastighet":a.postSection="Fastighetsägare & Bostadsrättsföreningar",a.icon="location_city";break;case"villa":a.postSection="Villa & Privat",a.icon="home";break;case"foretag":a.postSection="Företag & Verksamheter",a.icon="domain";break;case"page":a.postSection="Sidor",a.icon="insert_drive_file";break;case"faq":a.postSection="Frågor & svar",a.icon="forum";break;case"sorteringsguide":a.postSection="Sorteringsguiden",a.icon="delete"}return""===a.icon&&(a.icon="find_in_page"),a},a.prototype.spinner=function(){var e=arguments[0],a=arguments[1],t=arguments[2]?"block":"none";return a||(a="small"),'<div class="'+e+" preloader-wrapper "+a+' active" style="display:'+t+';"> <div class="spinner-layer spinner-white-only"> <div class="circle-clipper left"> <div class="circle"></div> </div><div class="gap-patch"> <div class="circle"></div> </div><div class="circle-clipper right"> <div class="circle"></div> </div> </div> </div> '},a.prototype.autocomplete=function(a){var t=e(a),n=t.find('input[type="search"]');n.val().length<2||this.autocompleteQuery(a)},a.prototype.pushQueryUrl=function(e,a,t){},a.prototype.autocompleteQuery=function(t){var n=e(t),s=n.find('input[type="search"]').val(),i=e("#post_type",n.find('input[type="search"]').parent()).val();a.prototype.pushQueryUrl(n,s,i);var r={action:"fetchDataFromElasticSearch",query:s,post_type:i,level:"ajax",type:"json"};a.prototype.getJsonData("elastic",n,r,i)},a.prototype.fetchPlannerQuery=function(t){var n=e(t),s=e("#searchkeyword-nsr").val(),i="",r={action:"fetchDataFromFetchPlannerCombined",query:s,post_type:i,level:"ajax",type:"json"};a.prototype.getJsonData("fetchplanner",n,r,null)},a.prototype.getJsonData=function(a,t,n,s){e.ajax({url:ajax_object.ajax_url,data:n,method:"GET",dataType:"json",beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",ajax_object.nonce),e(window).width()>500?e(".nsr-searchResult .preloader-wrapper").length<1&&e(".prefix").addClass("nsr-origamiLoader"):e(".search-button").addClass("nsr-origamiLoader"),e("#searchkeyword-nsr").removeClass("valid"),e("#searchkeyword-nsr").removeClass("invalid"),e("#searchkeyword-nsr").addClass("waitingForConnection")}}).done(function(e){this.dataFromSource(a,t,n,s,e)}.bind(this))},a.prototype.dataFromSource=function(a,t,n,s,i){"fetchDataFromElasticSearch"===n.action?(l.sortguide=i.sortguide.length>0?i.sortguide.length:0,l.page=i.content.length>0?i.content.length:0,"undefined"!=typeof i.sortguide&&null!==i.sortguide&&"undefined"!=typeof parent.ga?parent.ga("send","event","SiteSearch",n.action,n.query,i.sortguide.length):"","undefined"!=typeof i.content&&null!==i.content&&"undefined"!=typeof parent.ga?parent.ga("send","event","SiteSearch",n.action,n.query,i.content.length):"",this.outputAutocomplete(t,i),0==l.sortguide?(e(".search-nav li").removeClass("active"),e(".nsr-fetchplanner-nav").addClass("active"),e("#nsr-searchResult .sorteringsguiden").addClass("hide"),e("#nsr-searchResult .search-fetchPlanner").removeClass("hide")):e("#nsr-searchResult .search-fetchPlanner").addClass("hide")):("undefined"!=typeof i.fp&&null!==i.fp&&"undefined"!=typeof parent.ga?parent.ga("send","event","SiteSearch",n.action,n.query,i.fp.length):"",this.outputFetchPlanner(t,i)),e("#searchkeyword-nsr").hasClass("valid")&&e("#searchkeyword-nsr").addClass("valid"),e("#nsr-searchResult").css("display","block")},a.prototype.outputAutocomplete=function(t,n){var s=this.sortGuideResult(t,n),i=this.sortPagesResult(t,n);window.navigator.geolocation&&(e(".search-autocomplete-data .preloader-wrapper").fadeIn("slow"),window.navigator.geolocation.getCurrentPosition(a.prototype.UserLocation,a.prototype.GeoError)),s&&(e(".sorteringsguiden-data").append(s),e(".sorteringsguiden").removeClass("hide")),i&&e(".search-autocomplete-data").append(i),e("#nsr-searchResult").removeClass("hide"),e(".searchMenu").find("ul").hasClass("search-nav")?"":e(".searchMenu").append('<ul class="search-nav"><li class="vc_col-sm-3 nsr-elasticSearch-nav active">Sorteringsguiden</li><li class="vc_col-sm-3 nsr-page-nav">Sidor</li><li class="vc_col-sm-3 nsr-fetchplanner-nav">Tömmingsdagar</li></ul>'),e(".search-hits").html('Träffar på "'+e("#searchkeyword-nsr").val()+'" <span class="a-o right-align right hide mobHide">Sorteringsguiden A till Ö</span>'),e(".search-hits").removeClass("hide"),e(".nsr-elasticSearch-nav").hasClass("active")&&e(".a-o").removeClass("hide")},a.prototype.sortGuideResult=function(t,n){var s=0;if("undefined"!=typeof n.sortguide&&null!==n.sortguide&&n.sortguide.length>0){var i="",o=[],l=!1,d=e(window).width();return d<680&&(l=!0),e(".errorSortguide").is(":visible")&&e(".errorSortguide").addClass("hide"),i+='<table class="sortGuideCompleteInfo">',e.each(n.sortguide,function(e,t){if(i+='<tr class="tabDesk">',i+='<td class="preSortCell" valign="top">',i+=t.post_title+' <i class="hide expand-sortCell material-icons expand-less deskHide">expand_less</i> <i class="expand-sortCell material-icons expand-more deskHide">expand_more</i> </td><td valign="top" class="preSort-frakt">',t.post_meta){if(""!=t.post_meta.fraktion_avc.name&&null!=t.post_meta.fraktion_avc.name){if(i+='<ul class="sortAs meta-fraktion">',i+='<li class="fraktion-icon-avc">',i+='<b class="deskHide">Återvinningscentral:</b>',""!=t.post_meta.fraktion_avc.link)var n='<a href="'+t.post_meta.fraktion_avc.link+'">'+t.post_meta.fraktion_avc.name+"</a>";else var n=t.post_meta.fraktion_avc.name;l&&(i+="<div>"),i+=n,l&&(i+="</div>"),i+="</li></ul>"}if(""!=t.post_meta.fraktion_hemma.name&&null!=t.post_meta.fraktion_hemma.name){if(i+='<ul class="sortAs meta-fraktion">',i+='<li class="fraktion-icon-home">',i+='<b class="deskHide">Hemma:</b>',""!=t.post_meta.fraktion_hemma.link)var d='<a href="'+t.post_meta.fraktion_hemma.link+'">'+t.post_meta.fraktion_hemma.name+"</a>";else var d=t.post_meta.fraktion_hemma.name;l&&(i+="<div>"),i+=d,l&&(i+="</div>"),i+="</li>";var c="";t.post_meta&&t.post_meta.avfall_bra_att_veta&&t.post_meta.avfall_bra_att_veta.length>=1&&"undefined"!=typeof t.post_meta.avfall_bra_att_veta[0]&&(c=t.post_meta.avfall_bra_att_veta[0].replace(new RegExp("\r?\n","g"),"<br />"),c?i+='<li class="exnfodispl "><b>Bra att veta</b><div>'+c+"</div></li>":""),c="",i+="</ul>"}}i+="</td>",console.log(t.post_meta),i+=a.prototype.inStallen(t.post_meta,o,l),r[s]=o,s++,i+="</ul>",i+="</td>",i+="</tr>"}),i+="</table>",n.sortguide.length>0&&(e("#nsr-searchResult").removeClass("transparent-background"),e(".search-nav li").removeClass("active"),e(".nsr-elasticSearch-nav").addClass("active")),i}if("undefined"!=typeof n.sortguide&&null!==n.sortguide&&0===n.sortguide.length){var c="";c+='<div class="no-result"><h4>Sorteringsguide</h4><br /><p class="noResult">Det blev ingen träff på "'+e("#searchkeyword-nsr").val()+'". Tipsa oss om avfall som vi kan lägga till här  ( <a href="https://nsr.se/sorteringsguiden">nsr.se/sorteringsguiden</a> )</p></div>',e(".sorteringsguiden-data").html(c)}},a.prototype.inStallen=function(t,n,s){var i="",r="",n=[],o=!1,l=e(window).width();if(l<680&&(o=!0),r+='<td valign="top" class="preSort-inl">',r+='<i class="expand-inl material-icons expand-more">expand_more</i>',r+='<ul class="inlstallen">',t){if(t.inlamningsstallen&&t.inlamningsstallen.length){o&&(r+='<li class="deskHide"><h4>Lämnas nära dig:</h4></li>');for(var d=0;d<t.inlamningsstallen.length;d++){var c,p,h="",f="",u="",m="",v="",g="",y="";for(c=0;c<t.inlamningsstallen[d].length;c++)c>5&&(i="hide"),t.inlamningsstallen[d][c].pageurl&&(f="",u="",p="",a.prototype.Strpos(t.inlamningsstallen[d][c].pageurl,"?page_id=")&&(t.inlamningsstallen[d][c].pageurl="",f="",u="",h="",p=""),""!=t.inlamningsstallen[d][c].pageurl&&(f='<a href="'+t.inlamningsstallen[d][c].pageurl+'">',u="</a>",p="locationmap"),t.inlamningsstallen[d][c].lat&&t.inlamningsstallen[d][c]["long"]&&(t.inlamningsstallen[d][c].pageurl||(h=' data-url="http://maps.google.com?q='+t.inlamningsstallen[d][c].lat+","+t.inlamningsstallen[d][c]["long"]+'" ',p="locationmap"))),t.inlamningsstallen[d][c].lat&&t.inlamningsstallen[d][c]["long"]&&(m='data-lat="'+t.inlamningsstallen[d][c].lat+'" data-long="'+t.inlamningsstallen[d][c]["long"]+'"',v=a.prototype.hashCode("id_"+d+c+"_"+t.inlamningsstallen[d][c].lat+t.inlamningsstallen[d][c]["long"])),t.inlamningsstallen[d][c].lat&&t.inlamningsstallen[d][c]["long"]&&(n[c]=[t.inlamningsstallen[d][c].city,t.inlamningsstallen[d][c].lat,t.inlamningsstallen[d][c]["long"],t.inlamningsstallen[d][c].city,v]),g=v,v&&(v='id="'+v+'"'),v="",null!=t.inlamningsstallen[d][c].city&&(f||(y="nullLink"),r+='<li searchid="'+g+'" '+v+" "+m+' class="'+y+" "+p+" "+i+'" '+h+"> ",r+=f+t.inlamningsstallen[d][c].city+u+"</li>"),nullLink="",p="",i="",h="",m="",v=""}r+='<li class="viewAllInlamning"><a href="/alla-inlamningsstallen/">Visa alla</a></li>'}r+="</td>"}return r},a.prototype.sortPagesResult=function(t,n){var s=(a.prototype.spinner(a.prototype.hashCode("elasticCords")),"");if("undefined"!=typeof n.content&&null!==n.content&&n.content.length>0)return e.each(n.content,function(e,t){var n=t.post_excerpt.replace(/^(.{180}[^\s]*).*/,"$1");n&&(n+="...");var i=a.prototype.metaDataStr(t.post_type);i.icon||(i.icon="find_in_page"),s+='<div class="search-page-result collection"><div class="site-section">'+i.postSection+'</div><a href="'+t.guid+'">'+t.post_title,n&&(s+='<div class="moreinfo">'+n+"</div>"),s+="</a></div>",noContent=!0}),s;if("undefined"!=typeof n.content&&null!==n.content&&0===n.content.length){var i="";i+='<div class="no-result"><h4>Sidor på nsr.se</h4><br /><p class="noResult">Ingen träff på "'+e("#searchkeyword-nsr").val()+'".</p></div>',e(".search-autocomplete-data").html(i).removeClass("hide"),e("#nsr-searchResult").removeClass("transparent-background")}},a.prototype.outputFetchPlanner=function(a,t){var n='<div class="fp grid ">',s=!1;if("undefined"!=typeof t.fp&&null!==t.fp&&t.fp.length>0){var i=(new Date).toISOString().slice(0,10),r=!1;e.each(t.fp,function(a,o){var l=[],d="",c="";if(e("#searchkeyword-nsr").removeClass("invalid"),e("#searchkeyword-nsr").addClass("valid"),o.hasOwnProperty("Exec")){for(var p=!1,h=0;h<o.Exec.AvfallsTyp.length;h++)if(h<=5&&o.Exec.Datum[h]>=i&&!l.indexOf(o.Exec.AvfallsTyp[h]+" "+o.Exec.Datum[h])>-1){if(s=!0,p=!0,l.avfall=o.Exec.AvfallsTyp[h],o.Exec.AvfallsTyp[h]){var f=o.Exec.AvfallsTyp[h].toLowerCase();d+="<span>"+f.charAt(0).toUpperCase()+f.slice(1)+"</span>"}d+=" <br /> ",l.nDate=o.Exec.AvfallsTyp[h],c+="<span>"+o.Exec.DatumFormaterat[h]+"<span><br />",l[h]=o.Exec.AvfallsTyp[h]+" "+o.Exec.Datum[h]}p&&(n+='<div id="'+o.id+'" class="vc_col-sm-12 tabDesk">',n+='<div class="vc_col-sm-8 fp-address">',n+='<i class="expand-avfall material-icons expand-more">expand_more</i>',n+='<span class="fpTopic">'+o.Adress+"</span><br />",n+='<b class="">'+o.Ort+"</b><br /><br />",n+=' <a class="avfall-files-desk" target="_blank" href="/wp-admin/admin-ajax.php?action=fetchDataFromFetchPlannerCalendar&query='+encodeURIComponent(t.q)+"&level=ajax&type=json&calendar_type=ical&id="+encodeURIComponent(o.id)+'">Lägg till i kalender</a><br />',n+=' <a class="avfall-files-desk" target="_blank" href="/wp-admin/admin-ajax.php?action=fetchDataFromFetchPlannerCalendar&query='+encodeURIComponent(t.q)+"&level=ajax&type=json&calendar_type=pdf&id="+encodeURIComponent(o.id)+'">Visa PDF dokument</a>',n+="</div>",n+='<div  class="vc_col-sm-4 avfall hideDetails">',n+=' <a class="avfall-files-mob" target="_blank" href="/wp-admin/admin-ajax.php?action=fetchDataFromFetchPlannerCalendar&query='+encodeURIComponent(t.q)+"&level=ajax&type=json&calendar_type=ical&id="+encodeURIComponent(o.id)+'">Lägg till i kalender</a>',n+=' <a class="avfall-files-mob" target="_blank" href="/wp-admin/admin-ajax.php?action=fetchDataFromFetchPlannerCalendar&query='+encodeURIComponent(t.q)+"&level=ajax&type=json&calendar_type=pdf&id="+encodeURIComponent(o.id)+'">Visa PDF dokument</a>',n+='<div class="vc_col-sm-6 align-right vc_col-xs-6 bold">'+d+'</div><div class="vc_col-sm-6 vc_col-xs-6">'+c+"</div>",n+="</div>",n+="</div>")}r=!1})}n+="</div>",0===t.fp.length?(n='<div class="no-result"><h4>Tömningsdagar</h4><br /><p class="noResult">Det blev ingen träff på "'+e("#searchkeyword-nsr").val()+'". Tömningsdagar finns även på <a style="color:#ffffff!important;" href="https://minasidor.nsr.se">minasidor.nsr.se</a></p></div>',e(".search-fetchPlanner-data").html(n)):e(".search-fetchPlanner-data").html(n),setTimeout(function(){e(".prefix").removeClass("nsr-origamiLoader"),e(".search-button").removeClass("nsr-origamiLoader")},2e3)},a.prototype.GeoError=function(a){switch(a.code){case a.PERMISSION_DENIED:constant="PERMISSION_DENIED",e(".search-autocomplete-data .preloader-wrapper").hide();break;case a.POSITION_UNAVAILABLE:constant="POSITION_UNAVAILABLE",e(".search-autocomplete-data .preloader-wrapper").hide();break;case a.TIMEOUT:constant="TIMEOUT",e(".search-autocomplete-data .preloader-wrapper").hide();break;default:constant="Unrecognized error",e(".search-autocomplete-data .preloader-wrapper").hide()}},a.prototype.UserLocation=function(e){a.prototype.NearestCity(e.coords.latitude,e.coords.longitude)},a.prototype.Deg2Rad=function(e){return e*Math.PI/180},a.prototype.PythagorasEquirectangular=function(e,t,n,s){e=a.prototype.Deg2Rad(e),n=a.prototype.Deg2Rad(n),t=a.prototype.Deg2Rad(t),s=a.prototype.Deg2Rad(s);var i=6371,r=(s-t)*Math.cos((e+n)/2),o=n-e,l=Math.sqrt(r*r+o*o)*i;return l},a.prototype.getDistanceFromLatLonInKm=function(e,t,n,s){var i=6371,r=a.prototype.Deg2Rad(n-e),o=a.prototype.Deg2Rad(s-t),l=Math.sin(r/2)*Math.sin(r/2)+Math.cos(a.prototype.Deg2Rad(e))*Math.cos(a.prototype.Deg2Rad(n))*Math.sin(o/2)*Math.sin(o/2),d=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),c=i*d;return c},a.prototype.findClosest=function(){return arguments[0]instanceof Array&&(arguments=arguments[0]),Math.min.apply(Math,arguments)},a.prototype.NearestCity=function(t,n){var s=null;for(ind=0;ind<r.length;++ind)if(ind<r.length+1){var i,o=[];for(index=0;index<r[ind].length;++index)if(r[ind][index]){var l=a.prototype.getDistanceFromLatLonInKm(t,n,r[ind][index][1],r[ind][index][2]);o[index]=l,r[ind][index][3]=l}for(index=0;index<r[ind].length;++index)if(r[ind][index]){var d=a.prototype.findClosest(o);if(d===r[ind][index][3]){var s=r[ind][index][4],c=e('[searchid="'+s+'"]');e(c).each(function(){e(this).addClass("closeToHome")})}d=null}icn=!1}return e(".inlstallen").each(function(){var a=!1;e(this).find("li").each(function(){if(a)return void(e(this).hasClass("closeToHome")&&e(this).removeClass("closeToHome"));if(e(this).hasClass("closeToHome")){e(this).addClass("geoLink"),e(this).removeClass("hide");var t=e(this).clone();e(this).parent().prepend(t),e(this).remove(),a=!0}})}),e(".search-autocomplete-data .preloader-wrapper").fadeOut("slow"),r[i]},a.prototype.getUrlParameter=function(e){var a,t,n=decodeURIComponent(window.location.search.substring(1)),s=n.split("&");for(t=0;t<s.length;t++)if(a=s[t].split("="),a[0]===e)return void 0===a[1]||a[1]},new a}(jQuery);